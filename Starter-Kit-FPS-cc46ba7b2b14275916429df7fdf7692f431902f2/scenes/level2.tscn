[gd_scene load_steps=22 format=3 uid="uid://5qk8kc7yxyoa"]

[ext_resource type="Environment" uid="uid://b1715116eox1p" path="res://scenes/Level2-environment.tres" id="1_76toy"]
[ext_resource type="Script" uid="uid://cb2fbxd8fhvso" path="res://scenes/level_2.gd" id="1_wvb8j"]
[ext_resource type="PackedScene" uid="uid://dl2ed4gkybggf" path="res://objects/player.tscn" id="2_76toy"]
[ext_resource type="Script" uid="uid://by0qn28x1i1jj" path="res://scripts/hud.gd" id="3_8g4ke"]
[ext_resource type="FontFile" uid="uid://biqtga8moh7ah" path="res://fonts/lilita_one_regular.ttf" id="4_56gwk"]
[ext_resource type="PackedScene" uid="uid://d2g78tpqbyf5g" path="res://objects/enemy.tscn" id="5_ve5ok"]
[ext_resource type="PackedScene" uid="uid://udfnawffhdka" path="res://models/Level2/platform_3_level_2.tscn" id="10_bo4dx"]
[ext_resource type="PackedScene" uid="uid://7j2v3wel26a7" path="res://objects/movingplatform.tscn" id="11_8g4ke"]
[ext_resource type="PackedScene" uid="uid://btt5k0mem6m47" path="res://models/Level2/platform_1_level_2.tscn" id="11_76toy"]
[ext_resource type="PackedScene" uid="uid://cd8y8ytjrcbqy" path="res://models/Level2/platform_2_level_2.tscn" id="12_8g4ke"]
[ext_resource type="PackedScene" uid="uid://co3c1fb5qjrx5" path="res://objects/enemy_follow2.tscn" id="12_56gwk"]
[ext_resource type="PackedScene" uid="uid://dwvgakav2kln1" path="res://models/Level2/platform_4_level_2.tscn" id="13_56gwk"]
[ext_resource type="PackedScene" uid="uid://br75dsk6u48go" path="res://objects/meteo.tscn" id="13_cleqw"]
[ext_resource type="PackedScene" uid="uid://kh6vjfnxyi2w" path="res://objects/star.tscn" id="13_ve5ok"]
[ext_resource type="AudioStream" uid="uid://bm5jdqkkm0w0j" path="res://music/spaceship-arcade-shooter-game-background-soundtrack-318508.mp3" id="16_g8vcy"]
[ext_resource type="PackedScene" uid="uid://xo5175buku2d" path="res://objects/justportal.tscn" id="16_wvb8j"]
[ext_resource type="Script" uid="uid://civl1cys6pna" path="res://objects/justportal3.gd" id="17_g8vcy"]
[ext_resource type="PackedScene" uid="uid://dq7kuh0j12ggy" path="res://objects/spike.tscn" id="18_o3sye"]
[ext_resource type="PackedScene" uid="uid://ti1jvtvrmhwg" path="res://objects/pickup_heal.tscn" id="19_24ks5"]

[sub_resource type="LabelSettings" id="LabelSettings_fpmwk"]
font = ExtResource("4_56gwk")
font_size = 36
outline_size = 12
outline_color = Color(0, 0, 0, 0.470588)

[sub_resource type="LabelSettings" id="LabelSettings_wvb8j"]
font = ExtResource("4_56gwk")
font_size = 31

[node name="Main" type="Node3D"]
script = ExtResource("1_wvb8j")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = ExtResource("1_76toy")

[node name="Player" parent="." node_paths=PackedStringArray("crosshair") instance=ExtResource("2_76toy")]
transform = Transform3D(-0.009494444, 0, 0.99995494, 0, 1, 0, -0.99995494, 0, -0.009494444, -0.58244896, 2.1640239, -0.029338598)
crosshair = NodePath("../HUD/Crosshair")

[node name="Sun" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.422618, -0.694272, 0.582563, 0, 0.642788, 0.766044, -0.906308, 0.323744, -0.271654, 0, 0, 0)
shadow_enabled = true
shadow_opacity = 0.75

[node name="HUD" type="CanvasLayer" parent="."]
script = ExtResource("3_8g4ke")

[node name="Crosshair" type="TextureRect" parent="HUD"]
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -20.0
offset_top = -20.0
offset_right = 20.0
offset_bottom = 20.0
grow_horizontal = 2
grow_vertical = 2
scale = Vector2(0.35, 0.35)
pivot_offset = Vector2(64, 64)

[node name="Health" type="Label" parent="HUD"]
offset_left = 48.0
offset_top = 627.0
offset_right = 138.0
offset_bottom = 672.0
size_flags_horizontal = 0
size_flags_vertical = 8
text = "100%"
label_settings = SubResource("LabelSettings_fpmwk")
vertical_alignment = 2

[node name="score" type="Label" parent="HUD"]
offset_right = 40.0
offset_bottom = 23.0
text = "Score: 0"
label_settings = SubResource("LabelSettings_wvb8j")

[node name="Enemies" type="Node" parent="."]

[node name="enemy-flying" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_ve5ok")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -3.5, 2.5, -6)
player = NodePath("../../Player")

[node name="enemy-flying2" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_ve5ok")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, -13.1592, 3.29919, -1.56594)
player = NodePath("../../Player")

[node name="enemy-flying3" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_ve5ok")]
transform = Transform3D(-0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, -0.707107, -9.94207, 4.29009, 6.35179)
player = NodePath("../../Player")

[node name="enemy-flying4" parent="Enemies" node_paths=PackedStringArray("player") instance=ExtResource("5_ve5ok")]
transform = Transform3D(0.707107, 0, -0.707107, 0, 1, 0, 0.707107, 0, 0.707107, -31.1036, 7.27363, 3.90558)
player = NodePath("../../Player")

[node name="Level" type="Node" parent="."]

[node name="Decoration" type="Node" parent="."]

[node name="enemy-follow" parent="Decoration" node_paths=PackedStringArray("player") instance=ExtResource("12_56gwk")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -28.2715, 6.37752, 8.90642)
player = NodePath("../../Player")

[node name="enemy-follow2" parent="Decoration" node_paths=PackedStringArray("player") instance=ExtResource("12_56gwk")]
transform = Transform3D(0.5, 0, 0, 0, 0.5, 0, 0, 0, 0.5, -59.9251, 17.7034, -2.68443)
player = NodePath("../../Player")

[node name="platform1Level2" parent="Decoration" instance=ExtResource("11_76toy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -8.15163, 2.34347, -1.55124)

[node name="platform1Level4" parent="Decoration" instance=ExtResource("11_76toy")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -2.74745, 2.34347, 4.41443)

[node name="platform1Level3" parent="Decoration" instance=ExtResource("11_76toy")]
transform = Transform3D(1.475, 0, 0, 0, 1.475, 0, 0, 0, 1.475, -18.0414, 4.41545, 2.55354)

[node name="platform1Level5" parent="Decoration" instance=ExtResource("11_76toy")]
transform = Transform3D(-0.8878254, 0, 2.1434004, 0, 2.32, 0, -2.1434004, 0, -0.8878254, -14.3345, 4.41545, 10.0415)

[node name="platform_2_Level_2" parent="Decoration" instance=ExtResource("12_8g4ke")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.65207, 0.769771, -1.87255)

[node name="platform_4_level_2" parent="Decoration" instance=ExtResource("13_56gwk")]
transform = Transform3D(2, 0, 0, 0, 2, 0, 0, 0, 2, 0, -0.512462, -0.00744271)

[node name="platform_3_level_2" parent="Decoration" instance=ExtResource("10_bo4dx")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -4.5877, 0.836355, -1.92103)

[node name="platform_3_level_3" parent="Decoration" instance=ExtResource("10_bo4dx")]
transform = Transform3D(1.46742, 0, -0.149391, 0, 1.475, 0, 0.149391, 0, 1.46742, -6.21145, 3.35784, 10.7761)

[node name="platform_2_Level_3" parent="Decoration" instance=ExtResource("12_8g4ke")]
transform = Transform3D(1.38, 0, 0, 0, 1.38, 0, 0, 0, 1.38, -13.6195, 4.14282, 2.71307)

[node name="platform_2_Level_5" parent="Decoration" instance=ExtResource("12_8g4ke")]
transform = Transform3D(1.38, 0, 0, 0, 1.38, 0, 0, 0, 1.38, -22.5839, 4.14282, 7.47989)

[node name="platform_2_Level_4" parent="Decoration" instance=ExtResource("12_8g4ke")]
transform = Transform3D(2.04, 0, 0, 0, 2.04, 0, 0, 0, 2.04, -54.5091, 14.6671, 3.53711)

[node name="Movingplatform" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -22.16557, 3.076, 3.572)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform5" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -22.16557, 1.2713583, 16.743458)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform7" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -39.827816, 6.3725395, 16.743458)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform6" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -9.099994, 7.351774, 16.743458)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform3" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -14.833562, 3.076, -7.080846)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform4" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -32.981384, 3.076, -7.080846)
point_a = Vector3(-32.697, 3.076, 3.572)
point_b = Vector3(-22.166, 3.076, 3.572)

[node name="Movingplatform2" parent="Decoration" instance=ExtResource("11_8g4ke")]
transform = Transform3D(2.295, 0, 0, 0, 2.295, 0, 0, 0, 2.295, -48.223, 2.8552694, 3.572)
point_a = Vector3(-48.223, 13.429, 3.572)
point_b = Vector3(-48.223, 2.855, 3.572)

[node name="platform_4_level_3" parent="Decoration" instance=ExtResource("13_56gwk")]
transform = Transform3D(2.735, 0, 0, 0, 2.735, 0, 0, 0, 2.735, -40.7591, 3.83112, 3.49447)

[node name="platform_4_level_4" parent="Decoration" instance=ExtResource("13_56gwk")]
transform = Transform3D(2.735, 0, 0, 0, 2.735, 0, 0, 0, 2.735, -65.0351, 13.778, 3.49447)

[node name="Node3D" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.44885, 0, 2.03122, 0, 2.495, 0, -2.03122, 0, 1.44885, 15.076, 20.9442, -13.0449)

[node name="Node3D2" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(-0.0435436, 0, 2.49462, 0, 2.495, 0, -2.49462, 0, -0.0435436, -34.9322, -1.63433, -13.0449)

[node name="Node3D5" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.83951, 0, 1.6856, 0, 2.495, 0, -1.6856, 0, 1.83951, -10.4183, -1.63433, 72.5541)

[node name="Node3D6" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.66161, 0, -3.26108, 0, 3.66, 0, 3.26108, 0, 1.66161, -4.60217, 26.43, 31.1481)

[node name="Node3D7" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(0.390304, 0, 2.46428, 0, 2.495, 0, -2.46428, 0, 0.390304, -4.60217, 26.43, -35.8881)

[node name="Node3D8" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.74877, 0, -1.77956, 0, 2.495, 0, 1.77956, 0, 1.74877, -55.9521, 26.43, -4.80667)

[node name="Node3D9" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.58478, 0.0549863, 1.25939, 0, 2.02307, -0.0883293, -1.26059, 0.0691272, 1.58327, -32.3686, 26.43, 27.2119)

[node name="Node3D18" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.58478, 0.0549863, 1.25939, 0, 2.02307, -0.0883293, -1.26059, 0.0691272, 1.58327, -78.3859, 26.43, 27.2119)

[node name="Node3D19" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.58478, 0.0549863, 1.25939, 0, 2.02307, -0.0883293, -1.26059, 0.0691272, 1.58327, -71.025566, 31.714123, 43.002083)

[node name="Node3D20" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.58478, 0.0549863, 1.25939, 0, 2.02307, -0.0883293, -1.26059, 0.0691272, 1.58327, -71.025566, 45.717045, -24.231071)

[node name="Node3D21" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.58478, 0.0549863, 1.25939, 0, 2.02307, -0.0883293, -1.26059, 0.0691272, 1.58327, -71.025566, 56.91727, -57.895264)

[node name="Node3D10" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(0.162084, 0, 2.65005, 0, 2.655, 0, -2.65005, 0, 0.162084, 44.4106, 26.43, -29.6847)

[node name="Node3D11" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(1.36153, 0, 1.40991, 0, 1.96, 0, -1.40991, 0, 1.36153, -48.3665, 26.43, -29.6847)

[node name="Node3D3" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(2.495, 0, 0, 0, 2.495, 0, 0, 0, 2.495, 28.3715, 9.07328, -13.0449)

[node name="Node3D4" parent="Decoration" instance=ExtResource("13_ve5ok")]
transform = Transform3D(0.708618, 0, 2.39226, 0, 2.495, 0, -2.39226, 0, 0.708618, -2.41493, 9.07328, 23.8773)

[node name="Node3D12" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 22.3462, 40.1717, 14.9859)

[node name="Node3D22" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 54.47921, 59.577873, 14.9859)

[node name="Node3D13" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -66.1972, 21.3719, 14.9859)

[node name="Node3D14" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 9.36267, 46.7059, -52.3025)

[node name="Node3D15" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -71.3015, 46.7059, -24.9173)

[node name="Node3D16" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 26.6898, 46.7059, -48.9068)

[node name="Node3D17" parent="Decoration" instance=ExtResource("13_cleqw")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -56.7408, 46.7059, 28.0539)

[node name="music" type="Node" parent="."]

[node name="SpaceshipArcadeShooterGameBackgroundSoundtrack318508" type="AudioStreamPlayer" parent="music"]
stream = ExtResource("16_g8vcy")
volume_db = -10.0

[node name="RedFlash" type="CanvasLayer" parent="."]
layer = 2

[node name="damaged" type="ColorRect" parent="RedFlash"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
mouse_filter = 2
color = Color(1, 0.19607843, 0.14117648, 0.21960784)

[node name="heal" type="ColorRect" parent="RedFlash"]
visible = false
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 1, 0, 0.25882354)

[node name="Timer" type="Timer" parent="RedFlash"]

[node name="justportal" parent="." instance=ExtResource("16_wvb8j")]
transform = Transform3D(2.947975, 0, 0.109282255, 0, 2.9499996, 0, -0.109282255, 0, 2.947975, -65.21677, 13.693046, 3.4677904)
script = ExtResource("17_g8vcy")

[node name="Trap" type="Node" parent="."]

[node name="Root Scene" parent="Trap" instance=ExtResource("18_o3sye")]
transform = Transform3D(0.725, 0, 0, 0, 0.725, 0, 0, 0, 0.725, -2.7258384, 3.3298168, 4.35912)

[node name="Root Scene2" parent="Trap" instance=ExtResource("18_o3sye")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -22.45194, 4.1131105, 7.480098)

[node name="Item" type="Node" parent="."]

[node name="Pickup_Health2" parent="Item" instance=ExtResource("19_24ks5")]
transform = Transform3D(0.68, 0, 0, 0, 0.68, 0, 0, 0, 0.68, -13.482769, 7.6451406, 9.5765)

[node name="Pickup_Health3" parent="Item" instance=ExtResource("19_24ks5")]
transform = Transform3D(-0.041513044, 0, 0.6787317, 0, 0.68, 0, -0.6787317, 0, -0.041513044, -40.162132, 6.047641, 3.3741941)

[connection signal="heal_effect" from="Player" to="." method="_on_player_heal_effect"]
[connection signal="health_updated" from="Player" to="HUD" method="_on_player_health_updated"]
[connection signal="player_hit" from="Player" to="." method="_on_player_player_hit"]
